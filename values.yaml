# Global overrides
nameOverride: ""
fullnameOverride: ""
namespace:
  name: ai-hub
  create: true
commonLabels: {}
database:
  enabled: true
  name: my-db
  instances: 2
  imageName: ghcr.io/cloudnative-pg/postgresql:17
  initdb:
    database: ai_hub_db
    owner: ai_hub_admin
  storage:
    size: 30Gi
  appSecret:
    name: my-db-app
    usernameKey: username
    passwordKey: password
    jdbcKey: jdbc-uri
    hostKey: host
    portKey: port
    dbnameKey: dbname
  backup:
    enabled: true
    retentionPolicy: "7d"
    r2:
      existingSecretName: "r2-secret"
      bucketName: "aihub-db-backup"
      endpoint: "https://94f2f97d1ba42a3f48abbb18a47d5435.r2.cloudflarestorage.com"
  # CloudNative-PG Prometheus 메트릭 설정
  monitoring:
    enabled: true
    podMonitor:
      enabled: true
      interval: 30s
      scrapeTimeout: 10s
      additionalLabels: {}
springApp:
  enabled: true
  name: main-server
  replicas: 2
  # AI-HUB-BE에서 springApp.image로 찾음. 따라서 키 값 수정시 AI-HUB-BE도 수정해야 함.
  image: ghcr.io/ai-hub-kr/main-server:1959b6369671fa5f7ac79564f37551586f85f54c
  containerPort: 8080
  springProfile: prod
  existingSecret: "spring-app-secret"
  imagePullSecrets:
    - my-registry-secret
  resources: {}
  podAnnotations: {}
  # Prometheus 메트릭 설정
  metrics:
    enabled: true
    path: /actuator/prometheus
    port: 8080
    serviceMonitor:
      enabled: true
      interval: 30s
      scrapeTimeout: 10s
      additionalLabels: {}
  service:
    name: main-svc
    type: ClusterIP
    port: 8080
    targetPort: 8080
nestApp:
  enabled: true
  name: ai-api-server
  replicas: 2
  # AI-HUB-BE에서 nestApp.image로 찾음. 따라서 키 값 수정시 AI-API-SERVER도 수정해야 함.
  image: ghcr.io/ai-hub-kr/ai-api-server:d6f401b7b73b38da5e4952afdf9f7440eebbd38b
  containerPort: 3000
  existingSecret: "nest-app-secret"
  imagePullSecrets:
    - my-registry-secret
  resources: {}
  podAnnotations: {}
  # Prometheus 메트릭 설정
  metrics:
    enabled: true
    path: /metrics
    port: 3000
    serviceMonitor:
      enabled: true
      interval: 30s
      scrapeTimeout: 10s
      additionalLabels: {}
  service:
    name: ai-api-svc
    type: ClusterIP
    port: 3000
    targetPort: 3000
